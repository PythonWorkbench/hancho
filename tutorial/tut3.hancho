import hancho

rule_compile = hancho.base_rule.extend(
  command   = "g++ -c {files_in[0]} -o {files_out[0]}",
  files_out = "{swap_ext(files_in[0], '.o')}",
  depfile   = "{build_dir}/{swap_ext(files_in[0], '.d')}",
)

rule_link = hancho.base_rule.extend(
  command = "g++ {join(files_in)} -o {files_out[0]}",
)

rule_compile(
  files_in = "src/main.cpp"
)

rule_compile(
  files_in = "src/util.cpp"
)

rule_link(
  files_in = ["build/main.o", "build/util.o"],
  files_out = "build/app"
)
