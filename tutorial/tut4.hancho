import hancho

rule_compile = hancho.base_rule.extend(
  command   = "g++ -c {files_in[0]} -o {files_out[0]}",
  files_out = "{swap_ext(files_in[0], '.o')}",
  depfile   = "{build_dir}/{swap_ext(files_in[0], '.d')}",
)

rule_link = hancho.base_rule.extend(
  command = "g++ {join(files_in)} -o {files_out[0]}",
)

main_o = rule_compile(
  files_in = "main.cpp"
)

util_o = rule_compile(
  files_in = "util.cpp"
)

rule_link(
  files_in = [main_o, util_o],
  files_out = "app"
)
