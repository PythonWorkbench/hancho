# tests/cancellation.hancho
from hancho import *

build_config.defaults(
  command_path = Path.cwd(),
  source_path  = Path.cwd(),
  build_path   = Path.cwd() / "build",
)

touch = build_config.rule(command = "touch {rel_build_files}")

fail = build_config.rule(command = "(exit 255)")

task_that_fails  = fail ([], "fail_result.txt")
task_that_passes = touch([], "pass_result.txt")

touch(
  [task_that_fails, task_that_passes],
  "should_not_be_created.txt"
)
