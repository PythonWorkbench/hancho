import os
import hancho
import os

if os.name == 'nt':
  compile_cpp = hancho.Rule(
    command     = "cl.exe /c {rel_source_files} /sourceDependencies {rel_build_deps} /Fo:{rel_build_files}",
    build_files = "{swap_ext(source_files, '.o')}",
    build_deps  = "{swap_ext(source_files, '.d')}",
    depformat   = "gcc",
  )
elif os.name == 'posix':
  compile_cpp = hancho.Rule(
    command     = "gcc -MMD -c {rel_source_files} -o {rel_build_files}",
    build_files = "{swap_ext(source_files, '.o')}",
    build_deps  = "{swap_ext(source_files, '.d')}",
    depformat   = "msvc",
  )
else:
  assert False

touch_outputs = hancho.Rule(
  command = "touch {rel_build_files[0]}"
)
